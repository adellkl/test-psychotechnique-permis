â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    GUIDE DE MISE Ã€ JOUR - SYSTÃˆME MULTI-CENTRES              â•‘
â•‘                           Test Psychotechnique Permis                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“… Date de mise Ã  jour : 17 Octobre 2025
ğŸ‘¤ DÃ©veloppeur : Cascade AI
ğŸ¯ Objectif : Ajouter la gestion de plusieurs centres (Clichy + Colombes)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ TABLE DES MATIÃˆRES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Vue d'ensemble des modifications
2. Ã‰tape 1 : Migration de la base de donnÃ©es
3. Ã‰tape 2 : Modifications du code
4. Ã‰tape 3 : Configuration des emails
5. Ã‰tape 4 : Interface admin
6. Ã‰tape 5 : Tests et validation
7. Informations importantes

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. VUE D'ENSEMBLE DES MODIFICATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… FONCTIONNALITÃ‰S AJOUTÃ‰ES :
   â€¢ SÃ©lection du centre lors de la rÃ©servation (Clichy ou Colombes)
   â€¢ Filtrage des crÃ©neaux disponibles par centre
   â€¢ Filtrage des rendez-vous par centre dans l'interface admin
   â€¢ Affichage du centre dans les emails de confirmation
   â€¢ Gestion multi-centres complÃ¨te

ğŸ—‚ï¸ FICHIERS CRÃ‰Ã‰S :
   â€¢ MIGRATION_CENTERS_SQL.txt - Script SQL de migration
   â€¢ CODE_SELECTION_CENTRE.txt - Code pour la sÃ©lection du centre
   â€¢ app/admin/components/CenterFilter.tsx - Composant de filtrage admin
   â€¢ GUIDE_MULTI_CENTRES.txt - Ce guide

ğŸ“ FICHIERS MODIFIÃ‰S :
   â€¢ app/prendre-rendez-vous/page.tsx - Ajout sÃ©lection centre
   â€¢ components/Calendar.tsx - Support du filtrage par centre
   â€¢ lib/supabase.ts - Ajout interface Center
   â€¢ app/api/available-slots/route.ts - Filtrage par centre
   â€¢ app/api/send-appointment-emails/route.ts - DonnÃ©es du centre
   â€¢ lib/emailService.ts - Templates avec info centre
   â€¢ app/admin/dashboard/page.tsx - Filtrage admin par centre

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

2. Ã‰TAPE 1 : MIGRATION DE LA BASE DE DONNÃ‰ES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸ IMPORTANT : Cette Ã©tape est OBLIGATOIRE avant de dÃ©ployer le code !

ğŸ“ MARCHE Ã€ SUIVRE :

1. Ouvrez Supabase SQL Editor
   URL : https://hzfpscgdyrqbplmhgwhi.supabase.co

2. Copiez le contenu du fichier MIGRATION_CENTERS_SQL.txt

3. Collez et exÃ©cutez le script SQL complet

4. VÃ©rifiez que le script s'est exÃ©cutÃ© sans erreur

5. VÃ©rifiez que les deux centres ont Ã©tÃ© crÃ©Ã©s :
   SELECT * FROM centers;

   RÃ©sultat attendu :
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ id                                   â”‚ name                â”‚ city                    â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 11111111-1111-1111-1111-111111111111 â”‚ Centre de Clichy    â”‚ Clichy                  â”‚
   â”‚ 22222222-2222-2222-2222-222222222222 â”‚ Centre de Colombes  â”‚ Colombes                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ”‘ IDS FIXES DES CENTRES :
   â€¢ Clichy   : 11111111-1111-1111-1111-111111111111
   â€¢ Colombes : 22222222-2222-2222-2222-222222222222

ğŸ“Š STRUCTURE DE LA TABLE CENTERS :
   â€¢ id (UUID) - Identifiant unique
   â€¢ name (VARCHAR) - Nom du centre
   â€¢ address (TEXT) - Adresse complÃ¨te
   â€¢ city (VARCHAR) - Ville
   â€¢ postal_code (VARCHAR) - Code postal
   â€¢ phone (VARCHAR) - TÃ©lÃ©phone
   â€¢ email (VARCHAR) - Email de contact
   â€¢ is_active (BOOLEAN) - Centre actif ou non
   â€¢ created_at (TIMESTAMP) - Date de crÃ©ation
   â€¢ updated_at (TIMESTAMP) - Date de modification

ğŸ“Š MODIFICATION DE LA TABLE APPOINTMENTS :
   â€¢ Ajout de la colonne center_id (UUID, NOT NULL)
   â€¢ ClÃ© Ã©trangÃ¨re vers centers(id)
   â€¢ Index pour amÃ©liorer les performances
   â€¢ Tous les rendez-vous existants sont associÃ©s Ã  Clichy par dÃ©faut

ğŸ“Š MODIFICATION DE LA TABLE AVAILABLE_SLOTS :
   âš ï¸ IMPORTANT : Vous devez ajouter manuellement center_id aux crÃ©neaux existants !
   
   ALTER TABLE available_slots ADD COLUMN IF NOT EXISTS center_id UUID REFERENCES centers(id);
   
   -- Associer les crÃ©neaux existants Ã  Clichy
   UPDATE available_slots SET center_id = '11111111-1111-1111-1111-111111111111' WHERE center_id IS NULL;
   
   -- Rendre la colonne obligatoire
   ALTER TABLE available_slots ALTER COLUMN center_id SET NOT NULL;

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

3. Ã‰TAPE 2 : MODIFICATIONS DU CODE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“„ FICHIER : app/prendre-rendez-vous/page.tsx

MODIFICATIONS PRINCIPALES :
   âœ“ Ajout d'une Ã©tape 0 pour la sÃ©lection du centre
   âœ“ Ã‰tat selectedCenter pour stocker le centre choisi
   âœ“ Fonction handleCenterSelect pour gÃ©rer la sÃ©lection
   âœ“ Passage du center_id Ã  l'API lors de la crÃ©ation du rendez-vous
   âœ“ Affichage du centre sÃ©lectionnÃ© dans les Ã©tapes suivantes
   âœ“ Mise Ã  jour de la barre de progression (4 Ã©tapes au lieu de 3)

âš ï¸ ATTENTION : Le fichier est trÃ¨s long (750+ lignes). RÃ©fÃ©rez-vous au fichier
   CODE_SELECTION_CENTRE.txt pour les extraits de code Ã  ajouter.

Ã‰TAPES DE RÃ‰SERVATION MISES Ã€ JOUR :
   0. SÃ©lection du centre (NOUVEAU)
   1. SÃ©lection du crÃ©neau
   2. Informations personnelles
   3. Confirmation

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“„ FICHIER : components/Calendar.tsx

MODIFICATIONS :
   âœ“ Ajout du prop centerId?: string
   âœ“ Filtrage des crÃ©neaux par centre via l'API
   âœ“ Mise Ã  jour du useEffect pour recharger lors du changement de centre

CODE AJOUTÃ‰ :
   interface CalendarProps {
     onSlotSelect: (date: string, time: string) => void
     selectedDate?: string
     selectedTime?: string
     centerId?: string  // â† NOUVEAU
   }

   // Dans fetchAvailableSlots :
   const centerParam = centerId ? `&centerId=${centerId}` : ''
   const response = await fetch(`/api/available-slots?...${centerParam}`)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“„ FICHIER : lib/supabase.ts

MODIFICATIONS :
   âœ“ Ajout de center_id dans l'interface Appointment
   âœ“ CrÃ©ation de l'interface Center

CODE AJOUTÃ‰ :
   export interface Appointment {
     // ... champs existants
     center_id: string  // â† NOUVEAU
   }

   export interface Center {
     id: string
     name: string
     address: string
     city: string
     postal_code: string
     phone: string
     email: string
     is_active: boolean
     created_at: string
     updated_at: string
   }

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“„ FICHIER : app/api/available-slots/route.ts

MODIFICATIONS :
   âœ“ RÃ©cupÃ©ration du paramÃ¨tre centerId depuis l'URL
   âœ“ Filtrage des crÃ©neaux par centre si centerId est fourni
   âœ“ Filtrage des rendez-vous par centre pour vÃ©rifier la disponibilitÃ©

CODE MODIFIÃ‰ :
   const centerId = searchParams.get('centerId')
   
   let query = supabase.from('available_slots')...
   if (centerId) {
     query = query.eq('center_id', centerId)
   }

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

4. Ã‰TAPE 3 : CONFIGURATION DES EMAILS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“„ FICHIER : app/api/send-appointment-emails/route.ts

MODIFICATIONS :
   âœ“ Ajout des champs center_name, center_address, center_city, center_postal_code
   âœ“ Transmission de ces donnÃ©es aux fonctions d'envoi d'email
   âœ“ Valeurs par dÃ©faut pour Clichy si non fournies

CODE AJOUTÃ‰ :
   const sanitizedData = {
     // ... champs existants
     center_name: appointmentData.center_name || 'Centre de Clichy',
     center_address: appointmentData.center_address || '82 Rue Henri Barbusse',
     center_city: appointmentData.center_city || 'Clichy',
     center_postal_code: appointmentData.center_postal_code || '92110'
   }

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“„ FICHIER : lib/emailService.ts

MODIFICATIONS :
   âœ“ Ajout des paramÃ¨tres de centre dans sendAppointmentConfirmation
   âœ“ Ajout des paramÃ¨tres de centre dans sendAppointmentNotificationToAdmin
   âœ“ Utilisation dynamique des informations du centre dans les templates
   âœ“ Adaptation des dÃ©tails de localisation selon le centre

TEMPLATES MIS Ã€ JOUR :
   â€¢ Email client : Affiche le nom et l'adresse du centre sÃ©lectionnÃ©
   â€¢ Email admin : Affiche le centre dans les dÃ©tails du rendez-vous

VARIABLES DE TEMPLATE :
   {{location}} â†’ Nom du centre
   {{address}} â†’ Adresse complÃ¨te du centre
   {{location_details}} â†’ DÃ©tails d'accÃ¨s (mÃ©tro pour Clichy, gÃ©nÃ©rique pour autres)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

5. Ã‰TAPE 4 : INTERFACE ADMIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“„ NOUVEAU FICHIER : app/admin/components/CenterFilter.tsx

FONCTIONNALITÃ‰S :
   âœ“ Composant de sÃ©lection de centre pour l'admin
   âœ“ RÃ©cupÃ©ration automatique des centres actifs
   âœ“ Option "Tous les centres" par dÃ©faut
   âœ“ Bouton de rÃ©initialisation du filtre
   âœ“ Design cohÃ©rent avec l'interface admin

UTILISATION :
   <CenterFilter
     selectedCenterId={selectedCenterId}
     onCenterChange={setSelectedCenterId}
   />

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“„ FICHIER : app/admin/dashboard/page.tsx

MODIFICATIONS :
   âœ“ Import du composant CenterFilter
   âœ“ Ajout de l'Ã©tat selectedCenterId
   âœ“ Filtrage des rendez-vous par centre dans useEffect
   âœ“ Affichage du filtre au-dessus du tableau des rendez-vous

LOGIQUE DE FILTRAGE :
   1. Filtre par centre (si sÃ©lectionnÃ©)
   2. Puis filtre par recherche (si active)
   3. Affichage du nombre de rÃ©sultats

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

6. Ã‰TAPE 5 : TESTS ET VALIDATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CHECKLIST DE VALIDATION :

â–¡ BASE DE DONNÃ‰ES
  â–¡ Script SQL exÃ©cutÃ© sans erreur
  â–¡ Table centers crÃ©Ã©e avec 2 centres
  â–¡ Colonne center_id ajoutÃ©e Ã  appointments
  â–¡ Colonne center_id ajoutÃ©e Ã  available_slots
  â–¡ Rendez-vous existants associÃ©s Ã  Clichy
  â–¡ CrÃ©neaux existants associÃ©s Ã  un centre

â–¡ PAGE DE RÃ‰SERVATION
  â–¡ Ã‰tape 0 : SÃ©lection du centre s'affiche
  â–¡ Les 2 centres sont visibles (Clichy et Colombes)
  â–¡ Clic sur un centre passe Ã  l'Ã©tape 1
  â–¡ Le centre sÃ©lectionnÃ© s'affiche dans l'Ã©tape 1
  â–¡ Bouton "Changer" permet de revenir Ã  l'Ã©tape 0
  â–¡ Les crÃ©neaux affichÃ©s correspondent au centre choisi
  â–¡ Le centre s'affiche dans l'Ã©tape 2 (infos personnelles)
  â–¡ Le centre s'affiche dans la confirmation (Ã©tape 3)
  â–¡ La barre de progression affiche 4 Ã©tapes

â–¡ CRÃ‰ATION DE RENDEZ-VOUS
  â–¡ Le rendez-vous est crÃ©Ã© avec le bon center_id
  â–¡ VÃ©rification dans Supabase : SELECT * FROM appointments ORDER BY created_at DESC LIMIT 1;
  â–¡ La colonne center_id contient l'ID correct

â–¡ EMAILS
  â–¡ Email client reÃ§u avec le bon nom de centre
  â–¡ Email client contient la bonne adresse
  â–¡ Email admin reÃ§u avec les infos du centre
  â–¡ Pas d'erreur dans les logs d'envoi

â–¡ INTERFACE ADMIN
  â–¡ Filtre de centre visible au-dessus du tableau
  â–¡ Option "Tous les centres" fonctionne
  â–¡ SÃ©lection d'un centre filtre correctement
  â–¡ Bouton de rÃ©initialisation fonctionne
  â–¡ Le nombre de rendez-vous affichÃ© est correct
  â–¡ La recherche fonctionne avec le filtre de centre

â–¡ API
  â–¡ /api/available-slots?centerId=XXX retourne les bons crÃ©neaux
  â–¡ /api/available-slots sans centerId retourne tous les crÃ©neaux
  â–¡ Pas d'erreur 500 dans les logs

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

7. INFORMATIONS IMPORTANTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” IDENTIFIANTS FIXES DES CENTRES :

   Centre de Clichy :
   â€¢ ID : 11111111-1111-1111-1111-111111111111
   â€¢ Adresse : 82 Rue Henri Barbusse, 92110 Clichy
   â€¢ TÃ©lÃ©phone : 07 65 56 53 79

   Centre de Colombes :
   â€¢ ID : 22222222-2222-2222-2222-222222222222
   â€¢ Adresse : 14 rue de Mantes, 92700 Colombes
   â€¢ TÃ©lÃ©phone : 07 65 56 53 79

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âš ï¸ POINTS D'ATTENTION :

1. CRÃ‰NEAUX DISPONIBLES :
   â€¢ Vous devez crÃ©er des crÃ©neaux pour le centre de Colombes !
   â€¢ Utilisez l'interface admin ou SQL pour ajouter des available_slots
   â€¢ N'oubliez pas de spÃ©cifier le center_id pour chaque crÃ©neau

   Exemple SQL :
   INSERT INTO available_slots (date, start_time, end_time, center_id, is_available)
   VALUES ('2025-10-20', '09:00:00', '09:40:00', '22222222-2222-2222-2222-222222222222', true);

2. MIGRATION DES DONNÃ‰ES :
   â€¢ Tous les rendez-vous existants sont automatiquement associÃ©s Ã  Clichy
   â€¢ Les crÃ©neaux existants doivent Ãªtre associÃ©s manuellement (voir section 2)

3. COMPATIBILITÃ‰ :
   â€¢ Le code est rÃ©trocompatible : si center_id n'est pas fourni, Clichy est utilisÃ© par dÃ©faut
   â€¢ Les anciens rendez-vous sans centre fonctionnent toujours

4. PERFORMANCE :
   â€¢ Des index ont Ã©tÃ© ajoutÃ©s pour optimiser les requÃªtes par centre
   â€¢ Les requÃªtes sont filtrÃ©es cÃ´tÃ© base de donnÃ©es pour de meilleures performances

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“ SUPPORT ET DÃ‰PANNAGE :

PROBLÃˆME : Les centres ne s'affichent pas dans la page de rÃ©servation
SOLUTION : VÃ©rifiez que la table centers contient des centres avec is_active = true

PROBLÃˆME : Aucun crÃ©neau disponible pour Colombes
SOLUTION : CrÃ©ez des crÃ©neaux avec center_id = '22222222-2222-2222-2222-222222222222'

PROBLÃˆME : Erreur "center_id cannot be null"
SOLUTION : ExÃ©cutez le script SQL pour ajouter la colonne et les valeurs par dÃ©faut

PROBLÃˆME : Le filtre admin ne fonctionne pas
SOLUTION : VÃ©rifiez que tous les rendez-vous ont un center_id (pas de NULL)

PROBLÃˆME : Les emails affichent toujours "Clichy"
SOLUTION : VÃ©rifiez que les donnÃ©es du centre sont bien passÃ©es Ã  l'API d'envoi d'email

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸš€ PROCHAINES Ã‰TAPES SUGGÃ‰RÃ‰ES :

1. Ajouter une page admin pour gÃ©rer les centres
   â€¢ CrÃ©er/modifier/dÃ©sactiver des centres
   â€¢ GÃ©rer les informations de contact

2. Ajouter des statistiques par centre
   â€¢ Nombre de rendez-vous par centre
   â€¢ Taux de remplissage par centre

3. Permettre des horaires diffÃ©rents par centre
   â€¢ CrÃ©neaux spÃ©cifiques Ã  chaque centre
   â€¢ Jours d'ouverture diffÃ©rents

4. Ajouter des photos des centres
   â€¢ Galerie d'images pour chaque centre
   â€¢ Affichage sur la page de sÃ©lection

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ NOTES DE VERSION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Version 2.0 - Multi-Centres
Date : 17 Octobre 2025

AJOUTS :
â€¢ SystÃ¨me de gestion multi-centres
â€¢ SÃ©lection du centre lors de la rÃ©servation
â€¢ Filtrage admin par centre
â€¢ Informations du centre dans les emails

MODIFICATIONS :
â€¢ Structure de la base de donnÃ©es (ajout table centers)
â€¢ Interface de rÃ©servation (nouvelle Ã©tape)
â€¢ API de crÃ©neaux disponibles (filtrage par centre)
â€¢ Templates d'emails (donnÃ©es dynamiques du centre)

COMPATIBILITÃ‰ :
â€¢ RÃ©trocompatible avec les rendez-vous existants
â€¢ Migration automatique vers le centre de Clichy
â€¢ Valeurs par dÃ©faut pour Ã©viter les erreurs

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… FIN DU GUIDE - SystÃ¨me multi-centres prÃªt Ã  Ãªtre dÃ©ployÃ© !

Pour toute question ou problÃ¨me, rÃ©fÃ©rez-vous Ã  ce guide ou consultez les
fichiers de code source modifiÃ©s.

Bonne chance avec le dÃ©ploiement ! ğŸš€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
